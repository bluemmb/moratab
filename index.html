<!DOCTYPE html>
<html>
<head>
	<title>مرتب</title>
	<meta charset="utf-8" />
</head>
<body>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

<script>
	Markdown = {};
</script>

<script type="text/javascript" src="view/Markdown.Converter.js"></script>
<script type="text/javascript" src="editor/libs.js"></script>
<script type="text/javascript" src="editor/syntax.js"></script>
<script type="text/javascript" src="editor/buttons.js"></script>
<script type="text/javascript" src="editor/editor.js"></script>
<script type="text/javascript" src="view/Markdown.Extra.js"></script>

<!-- <script type="text/javascript" src="view/marked.js"></script> -->

<link type="text/css" rel="stylesheet" href="editor/editor.css">
<link type="text/css" rel="stylesheet" href="view/view.css">
<link type="text/css" rel="stylesheet" href="style.css">

<div style="position:absolute; left:20px; top:10px; z-index:100; opacity: 0.3;">
	<button id="stopbtn">Stop</button>
	<button id="viewbtn">View</button>
</div>

<div id="view">
	

</div>
<div id="moratab"># مرتب

متن *مرتب* یا [مارک‌دان]، نوشته‌ای است که شیوه نمایش آن با علامت‌های ساده‌ای مشخص شده است. یعنی شکل نمایش متن را لابه‌لای واژه‌ها می‌نویسید. مثلا *خاص* بودن یک عبارت و یا **تاکید** روی نکته‌ها با کمک ستاره انجام می‌شود.

> وقتی *مرتب* می‌نویسید، مطمئن هستید که چیزی در متن پنهان نشده. در مقابل نرم‌افزار [ورد] که گاهی می‌بینید نشان‌گر روی یک خط خالی ایستاده و به صورت *مورب* قرار گرفته؛ انگار چیزی آن زیر هست. راستش آن زیر، [چیز خیلی مزخرفی] هست.

نوشته‌های *مرتب* کاربردهای زیادی دارند:

+ [پرسیدن سوال](http://stackoverflow.com)
+ [بحث در مورد پروژه](https://github.com)
+ [وب‌نوشت](https://svbtle.com)
+ [گزارش پروژه](http://www.boute.ir)

حتی می توان از لیست های تودرتو استفاده کرد:

+ ۱
	+ ۱.۱
	+ ۱.۲
		+ ۱.۲.۱
		+ ۱.۲.۲
	+ ۱.۳
+ ۲
	+ ۲.۱

قرار دادن [پیوند]، پاورقی[^Footnote] و یا حتی تصویر هم در این نوشتار پیش‌بینی شده:

![تصویر باز شکاری](http://media.farsnews.com/media//8907/Images/jpg/A0926/A0926423.jpg)

## جدول
جدول *مرتب* شده هم بسیار بامزه است (نقطه‌ها چینش ستون را نشان می‌دهد):

| نوشتار    | بدون نیاز به آموزش | ویژگی‌های نامتناهی  |
|:----------|:------------------:|:------------------:|
| مرتب      |          ✓         |          ✗         |
| ورد       |          ✗         |          ✓         |

## کد
اگر برنامه‌نویس هستید، تکه کد `Python` زیر، همین نوشته را به قالب `HTML` تبدیل می‌کند:

	>>> import moratab
	>>> moratab.render(content)

و بلاخره، نوشته [مرتب] با مشخص کردن آدرس پیوندها به پایان می‌رسد.

[مرتب]: http://www.sobhe.ir/moratab
[مارک‌دان]: https://daringfireball.net/projects/markdown
[پیوند]: http://peyvandha.ir
[ورد]: http://office.microsoft.com/en-us/word
[چیز خیلی مزخرفی]: http://www.antipope.org/charlie/blog-static/2013/10/why-microsoft-word-must-die.html
[^Footnote]: https://fa.wikipedia.org/wiki/%D9%BE%D8%A7%D9%88%D8%B1%D9%82%DB%8C
</div>

<script type="text/javascript">

	$(document).ready( function (){
		
		// Initialize Editor
		content = $('<textarea/>').html($('#moratab').html()).val();
		var editor = $('#moratab').moratab(content, {strings: {help: ''}});
		
		// Initialize View
		function view() {
			var text = $('#moratab').text();
			var converter = new Markdown.Converter();
			Markdown.Extra.init(converter, {});
			var html = converter.makeHtml(text);
			console.log( text );
			$('#view').html(html);
		}

		view();
		$( "#viewbtn" ).on( "click" , function() {
			view();
		} );

		/*var timer = setInterval( function() {
			view();
		} , 100 );*/

		$( "#stopbtn" ).on( "click" , function() {
			clearInterval( timer );
		} );

	} );
</script>

</body>
</html>
